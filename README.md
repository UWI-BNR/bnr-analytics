## Description of Stata `.do` Files  
This document provides a structured, hyperlink-enabled catalogue of all Stata `.do` files contained within the **BNR Analytics** repository. Each entry includes the file name, and a concise description of the file’s purpose within the BNR-CVD data processing and reporting workflow. Full commenting for each DO file is contained as part of the DO file itself. 

| NAME | DESCRIPTION |
| --- | --- |
| 2023 ANALYTICS |
| [`bnrcvd-2023-prep1.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-prep1.do) |  Uses the full cumulative dataset (2009–2023) to create an analysis-ready but still identifiable dataset. Is called from all subsequent 2023 Analytics DO files. |
| [`bnrcvd-2023-count.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-count.do) | Creates the 2023 Briefing called<br/>*Hospital Cardiovascular Cases in Barbados* |
| [`bnrcvd-2023-incidence.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-incidence.do) | Creates the 2023 Briefing called<br/>*Hospital Cardiovascular Event Rate in Barbados* |
| [`bnrcvd-2023-case-fatality.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-case-fatality.do)| Creates the 2023 Briefing called<br/>*In-Hospital Cardiovascular Deaths in Barbados* |
| [`bnrcvd-2023-length-of-stay.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-length-of-stay.do)| Creates the 2023 Briefing <br/>*Hospital Stay Among Cardiovascular Patients in Barbados* |
| [`bnrcvd-2023-tabulations.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-tabulations.do)| Creates a series of MARKDOWN and EXCEL data tables that can be seen on the BNR web page: [Data Tables 2023](https://uwi-bnr.github.io/resource-hub/3Reporting/datatables/) |
| [`bnrcvd-2023-missing.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-missing.do)| Creates a single Excel spreadsheet containing a series of tables looking at levels of missing data in key BNR registry variables through time (2010 - 2023). The Excel spreadsheet is available [on the BNR website](https://uwi-bnr.github.io/resource-hub/2Data/dataset/dataquality/) |
| 2023 UTILITIES | |
| [`bnrcvd-2023-redcap.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-redcap.do)| Exports data from the REDCap Core BNR-CVD database (PID 670), capturing raw data as strings for downstream processing. Uses python (PyCap) for this API export. |
| [`bnrcvd-globals.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-globals.do)| Defines global macros used across all BNR-CVD analytics scripts, including directory paths, color HEX values, UNICODE graphics markers, and more. Is called from each 2023 Analytics DO file. |
| [`bnrcvd-unwpp.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-unwpp.do)| Uses the United Nationas WPP API to extract the UN World Population Prospects data for Barbados into analysis-ready population denominators for rate calculations. Uses python to complete this API export. |
| [`bnrcvd-2023-missing-collect.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-missing-collect.do)| A short DO file utility that is called repeatedly in the main *missing* DO file `bnrcvd-2023-missing.do`. Simply to make the main DO file more manageable - should formatting changes ever be wanted for the many tables, they can be performed in this single block of code.|
| 2023 LEGACY DO FILES | |
| [`bnrcvd-2023-forensics1.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-forensics1.do)|  This DO file is not part of the main analytics. It explores alternative datasets as possible candidates to contribute to the cumulative dataset. |
| [`bnrcvd-2023-forensics2.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2023-forensics2.do)| This DO file is not part of the main analytics. It highlights the poor DM/ folder and file structure in the BNR file repository as of Nov-2025. The resulting output from this DO file is presented on the BNR website: [Duplicate Datasets](https://uwi-bnr.github.io/resource-hub/2Data/dataset/forensics/#case-example-2-duplicate-datasets-in-the-bnr-document-repository)  |
| 2023 ADO FILES | |
| [`bnrpath.ado`](https://github.com/UWI-BNR/bnr-analytics/blob/main/ado/bnrpath.ado)|  This ADO file sets the root path for the project.<br/>**Each approved analyst should set the local path in this **`.ado`** file to their `bnr-analytics` repository** |
| [`bnryaml.ado`](https://github.com/UWI-BNR/bnr-analytics/blob/main/ado/bnryaml.ado)|  This ADO file creates a simple .yml (YAML) file, containing dataset-level metadata. Review its use in any briefing DO file (such as `bnrcvd-2023-count.do`). <br/><br/> The idea is that each dataset will have an associated `.yml` file. A .yml file is a human-readable configuration file (it is effectively a `.txt` file) written in the YAML format, which is useful for storing dataset-level metadata because it allows you to organise information such as variable names, types, labels, and descriptions in a clean, structured, machine-readable format that is easy for both humans and software tools to interpret.<br/><br/>It has an associated help file (`bnryaml.sthlp`). |
| [`make_meta-xlsx.ado`](https://github.com/UWI-BNR/bnr-analytics/blob/main/ado/make_meta_xlsx.ado)|  This ADO file has one sepecific use - to attach dataset-level and variable-level metadata to an exported Excel aggregated dataset. For an example of its use, see `bnrcvd-2023-count.do`. |
| 2024 ANALYTICS |
| [`bnrcvd-2024-redcap-format.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2024-redcap-format.do){ target="_blank"} |  Uses python coding (the package: PyCap) to extract data directly from the REDCap API. The `.do` file extracts variables and associated variable-level metadata (variable labels, category labelling) directly into a Stata dataset via a python-pandas dataframe. The variable list to be exported and the export timeframe can be easily edited in this `.do` file. This export process is explained in the [associated help file](./howto-export.md). |
| [`bnrcvd-2024-redcap-noformat.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2024-redcap-format.do){ target="_blank"} |  The main REDCap export `.do` file (`bnrcvd-2024-redcap-format.do`) contains a fair bit of Python coding. I have created this alternative (much simpler) `.do` file that simply extracts variables from REDCap in string format and without associated metadata - to leave all subsequent data preparation in the more familiar Stata environment. (This might be useful for the future...).  |
| [`bnrcvd-2024-prep1.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2024-prep1.do){ target="_blank"} |  Joins monthly releases from 2024 to the (2009-2023) cumulative dataset. Otherwise, coding is much the same as for the 2023 version of the DO file. Exported files are placed in the BNR `temp/` folder and are not for general release. |
| [`bnrcvd-2024-count.do`](https://github.com/UWI-BNR/bnr-analytics/blob/main/do/bnrcvd-2024-count.do){ target="_blank"} | This `.do` file is similar in style to the 2023 version of this file, but does not go beyond the creation  of a week-by-week count of CVD event, stratified by type (strokes, heart attacks). The 2024 charts are compared against the average of the previous 5 years (2018-2023). The chart can be built slowly over time as more data from the year become available, and give an ongoing sense of case-load compared to recent years.  |